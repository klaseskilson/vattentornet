<%= form_for @booking, :html=>{'ng-app' => 'booking-form'} do |f| %>
<div class="main-content main-form booking-new">
  <% if @booking.errors.any? %>
    <div id="error_explanation" class="notices">
      <h3><%= @booking.errors.count %> fel skedde:</h3>

      <% @booking.errors.full_messages.each do |message| %>
        <p><%= message %></p>
      <% end %>
    </div>
  <% end %>
    <div class="pane">
      <h3 class="fat"><%= yield(:title) %></h3>

      <div class="row">
        <div class="col-sm-5">
          <%= f.label "Mail" %><br>
          <% if user_signed_in_and_admin? %>
            <%= f.text_field :email, value: current_user.email %>
          <% else %>
            <%= f.text_field :email, placeholder: "Din epostadress" %>
          <% end %>
        </div>
        <div class="col-sm-4">
          <%= f.label "Datum" %><br>
          <%= f.date_field :date, :order => [:day, :month, :year] %>
        </div>
        <div class="col-sm-3">
          <%= f.label "Boka puben?" %><br>
          <%= f.check_box :pub %> Ja!
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <%= f.label "Beskrivning" %><br>
          <%= f.text_area :description, rows: 4, placeholder: "Vad skall du göra?" %>
        </div>
      </div>
      <% if user_signed_in_and_admin? %>
        <div id="adminBooking" ng-controller="AdminBookingsCtrl" >
          <div class="row">
            <div class="col-sm-3">
              <%= f.label "Bekräftad" %><br>
              <%= f.check_box :confirmed %>
            </div>
            <div class="col-sm-3">
              <%= f.label "Publik" %><br>
              <%= f.check_box :public %>
            </div>
            <div class="col-sm-3">
              <%= f.label :interval %><br>
              <%= f.check_box :interval, 'ng-model'=>'interval' %>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12" ng-show="interval">
            <%= f.label :weekdays %><br>
              <% ['måndag', 'tisdag', 'onsdag', 'torsdag', 'fredag', 'lördag', 'söndag'].each_with_index do |wday, index| %>
                <%= f.check_box('weekdays', {:multiple => true}, index, nil) %>
                <%= f.label wday %>
              <% end %>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12" ng-show="interval">
              <%= f.label "Slutdatum" %><br>
              <%= f.date_field :end_date %>
              <i><%= f.label "Sista datumet för intervallet." %></i>
            </div>
          </div>
        </div>
      <% else %>
        <%= f.hidden_field :confirmed, :value => false %>
      <% end %>
    </div>
</div>
<div class="sidebar sidebar-form booking-sidebar">
  <div class="pane">
    <h3 class="fat">Boka</h3>
    <p>
      <%= f.submit "Skicka bokning!" %>
    </p>
    <p class="small">
      Din bokning skickas till borådet. Du kommer få ett bekräftelsemail när den
      är godkänd.
    </p>
  </div>
</div>
<% end %>
