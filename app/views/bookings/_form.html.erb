<%= form_for @booking, :html=>{'ng-app'=> 'booking-form'} do |f| %>
  <% if @booking.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@booking.errors.count, "error") %> prohibited this booking from being saved:</h2>

      <ul>
      <% @booking.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :date %><br>
    <%= f.date_field :date, :order => [:day, :month, :year] %>
  </div>
  <div class="field">
    <%= f.label :email %><br>
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :description %><br>
    <%= f.text_area :description %>
  </div>
  <div class="field">
    <%= f.label :pub %><br>
    <%= f.check_box :pub %>
  </div>
  <% if user_signed_in_and_admin? %>
    <div id="admin" ng-controller="admin-form" >
      <div class="field">
        <%= f.label :confirmed %><br>
        <%= f.check_box :confirmed %>
      </div>
      <div class="field">
        <%= f.label :public %><br>
        <%= f.check_box :public %>
      </div>
      <div class="field">
        <%= f.label :interval %><br>
        <%= f.check_box :interval, 'ng-model'=>'interval' %>
      </div>
      <div class="field" ng-show="interval">
        <%= f.label :weekdays %><br>
          <% ['måndag', 'tisdag', 'onsdag', 'torsdag', 'fredag', 'lördag', 'söndag'].each_with_index do |wday, index| %>
            <%= f.check_box('weekdays', {:multiple => true}, index, nil) %>
            <%= f.label wday %>
          <% end %>
      </div>
      <div class="field" ng-show="interval">
        <%= f.label :end_date %><br>
        <%= f.date_field :end_date %>
      </div>
    </div>
  <% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
